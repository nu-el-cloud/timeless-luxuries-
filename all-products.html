<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>All Products | TIMELESS</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: #fff;
      color: #000;
      line-height: 1.6;
    }

    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      position: sticky;
      top: 0;
      background: white;
      z-index: 100;
      border-bottom: 1px solid #eee;
    }
  
  .search-bar input:focus {
    outline: none;
  }
  #searchDropdown {
    position: absolute;
    top: 60px;
    left: 0;
    width: 100%;
    background: white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    z-index: 1000;
    max-width: 1400px;
    margin: 0 auto;
    padding: 15px 20px;
    display: none;
  }
  .product-preview {
    flex: 1;
    min-width: 150px;
    text-align: center;
    margin-bottom: 15px;
  }
  .product-preview img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border: 1px solid #eee;
  }
  .suggestion-item {
    padding: 8px 0;
    cursor: pointer;
  }
  .suggestion-item:hover {
    color: #000;
  }


    .logo img {
      height: 120px;
      width: auto;
      display: block;
    }
    
    .nav {
      display: flex;
      gap: 20px;
      font-size: 14px;
      font-weight: 500;
    }

    .nav a {
      text-decoration: none;
      color: #000;
      cursor: pointer;
    }

    .nav a:hover {
      opacity: 0.8;
    }

    .icons {
      display: flex;
      gap: 15px;
    }

    .icons a {
      font-size: 18px;
      color: #000;
      text-decoration: none;
    }

    /* Products Grid */
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 20px;
      max-width: 1400px;
      margin: 60px auto;
      padding: 0 20px;
    }

    .product {
      border: 1px solid #eee;
      overflow: hidden;
      text-align: center;
      position: relative;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border-radius: 8px;
      background: #fff;
      cursor: pointer;
    }

    .product:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .product img {
      width: 100%;
      height: auto;
      object-fit: cover;
      display: block;
    }

    .product-name {
      font-size: 14px;
      margin: 10px 0 5px 0;
      font-weight: 500;
      color: #000;
      padding: 0 10px;
    }

    .price {
      font-size: 16px;
      color: #000;
      font-weight: 500;
      padding: 0 10px 5px;
    }

    .sold-out {
      color: #888;
      font-style: italic;
      margin: 5px 0;
      font-size: 14px;
      padding: 0 10px 10px;
    }

    /* Product Detail Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
    }

    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 800px;
      border-radius: 8px;
      position: relative;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      top: 15px;
      right: 20px;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    /* Product detail layout */
    .product-detail {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
    }

    .product-image {
      flex: 1;
      min-width: 300px;
    }

    .product-info {
      flex: 1;
      min-width: 300px;
    }

    .product-price {
      font-size: 18px;
      color: #000;
      font-weight: 500;
      margin: 10px 0;
    }

    .quantity-control {
      display: flex;
      align-items: center;
      margin: 15px 0;
    }

    .quantity-btn {
      width: 30px;
      height: 30px;
      background: #eee;
      border: none;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .quantity-input {
      width: 50px;
      text-align: center;
      padding: 5px;
      border: 1px solid #ddd;
    }

    .size-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
    }

    .size-option {
      padding: 5px 10px;
      border: 1px solid #ddd;
      cursor: pointer;
      border-radius: 4px;
    }

    .size-option.selected {
      background: #000;
      color: white;
      border: 1px solid #000;
    }

    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .button {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
    }

    .add-to-cart-btn {
      background: #000;
      color: white;
    }

    .buy-now-btn {
      background: #000;
      color: white;
    }

    .button:hover {
      background: #333;
      transform: scale(1.05);
    }

    /* Footer */
    footer {
      padding: 40px 20px;
      text-align: left;
      max-width: 1400px;
      margin: 0 auto;
    }

    footer h3 {
      font-size: 16px;
      margin-bottom: 10px;
    }

    .social-icons {
      display: flex;
      gap: 15px;
    }

    .social-icons a {
      font-size: 18px;
      color: #000;
      text-decoration: none;
    }

    .social-icons img {
      width: 24px;
      height: 24px;
      vertical-align: middle;
    }

    /* Back Link */
    .back-link {
      max-width: 1400px;
      margin: 20px auto;
      padding: 0 20px;
      font-size: 14px;
    }

    .back-link a {
      color: #000;
      text-decoration: none;
      font-weight: 500;
    }

    .back-link a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="logo">
      <a href="index.html">
        <img src="TIMELESS/timelesslogo.png" alt="TIMELESS">
      </a>
    </div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="all-products.html" style="color: #000; opacity: 0.8;">All Products</a>
      <a href="#">Collections</a>
      <a href="#">Lookbook</a>
      <a href="about.html">About</a>
    </nav>
    <div class="icons">
      <a href="#" title="Search" onclick="toggleSearch()">üîç</a>
      <a href="cart.html" title="Cart">üõçÔ∏è</a>
    </div>
  </header>
  
  <!-- Search Input (Hidden by Default) -->
  <div id="searchContainer" style="display: none; max-width: 1400px; margin: 20px auto; padding: 0 20px;">
    <input 
      type="text" 
      id="searchInput" 
      placeholder="Search products..." 
      oninput="searchProducts()"
      style="width: 100%; padding: 12px; font-size: 16px; border: 1px solid #ddd; border-radius: 6px; outline: none;"
    >
  </div>

  <!-- Back to Home -->
  <div class="back-link">
    <a href="index.html">‚Üê Back to Home</a>
  </div>

  <!-- Products Grid -->
  <div class="products" id="productsGrid">
    <!-- Product: Baseball hat - Black (Sold Out) -->
    <div class="product" data-name="Baseball hat - Black" data-id="hat-black">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_48.jpg?v=1733571775&width=3000" alt="Baseball hat - Black" />
      <div class="product-name">Baseball hat - Black</div>
      <div class="sold-out">Sold out</div>
    </div>

    <!-- Product: Baseball hat - Blue -->
    <div class="product" data-name="Baseball hat - Blue" data-price="160000" data-id="hat-blue" onclick="openProductDetail('hat-blue', 'Baseball hat - Blue', 160000, 'https://www.zttw.store/cdn/shop/files/zttw_52.jpg?v=1733571780&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_52.jpg?v=1733571780&width=3000" alt="Baseball hat - Blue" />
      <div class="product-name">Baseball hat - Blue</div>
      <div class="price">‚Ç¶160,000.00</div>
    </div>

    <!-- Product: Baseball hat - Cream -->
    <div class="product" data-name="Baseball hat - Cream" data-price="160000" data-id="hat-cream" onclick="openProductDetail('hat-cream', 'Baseball hat - Cream', 160000, 'https://www.zttw.store/cdn/shop/files/zttw_50.jpg?v=1733571776&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_50.jpg?v=1733571776&width=3000" alt="Baseball hat - Cream" />
      <div class="product-name">Baseball hat - Cream</div>
      <div class="price">‚Ç¶160,000.00</div>
    </div>

    <!-- Product: Black Camo Hat -->
    <div class="product" data-name="Black Camo Hat" data-price="160000" data-id="hat-camo-black" onclick="openProductDetail('hat-camo-black', 'Black Camo Hat', 160000, 'https://www.zttw.store/cdn/shop/files/zttw_45_21693ff9-273f-45b6-afb5-a24ae2a9428f.jpg?v=1741957993&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_45_21693ff9-273f-45b6-afb5-a24ae2a9428f.jpg?v=1741957993&width=3000" alt="Black Camo Hat" />
      <div class="product-name">Black Camo Hat</div>
      <div class="price">‚Ç¶160,000.00</div>
    </div>

    <!-- Product: Black Camo Puffer Shorts -->
    <div class="product" data-name="Black Camo Puffer Shorts" data-price="320000" data-id="puffer-shorts-black" onclick="openProductDetail('puffer-shorts-black', 'Black Camo Puffer Shorts', 320000, 'https://www.zttw.store/cdn/shop/files/zttw_13_267df2cb-be95-4bee-b400-2a0bb9037e51.jpg?v=1741957991&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_13_267df2cb-be95-4bee-b400-2a0bb9037e51.jpg?v=1741957991&width=3000" alt="Black Camo Puffer Shorts" />
      <div class="product-name">Black Camo Puffer Shorts</div>
      <div class="price">‚Ç¶320,000.00</div>
    </div>

    <!-- Product: Black Camo Puffer Top -->
    <div class="product" data-name="Black Camo Puffer Top" data-price="320000" data-id="puffer-top-black" onclick="openProductDetail('puffer-top-black', 'Black Camo Puffer Top', 320000, 'https://www.zttw.store/cdn/shop/files/zttw_11_ca2fe38e-dfca-4b4a-ac93-7bd0012a0e14.jpg?v=1741958027&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_11_ca2fe38e-dfca-4b4a-ac93-7bd0012a0e14.jpg?v=1741958027&width=3000" alt="Black Camo Puffer Top" />
      <div class="product-name">Black Camo Puffer Top</div>
      <div class="price">‚Ç¶320,000.00</div>
    </div>

    <!-- Product: Black Leather Vest -->
    <div class="product" data-name="Black Leather Vest" data-price="400000" data-id="vest-leather-black" onclick="openProductDetail('vest-leather-black', 'Black Leather Vest', 400000, 'https://www.zttw.store/cdn/shop/files/zttw_17_461f8102-3c5a-4067-83cd-275b35dba60b.jpg?v=1741958033&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_17_461f8102-3c5a-4067-83cd-275b35dba60b.jpg?v=1741958033&width=3000" alt="Black Leather Vest" />
      <div class="product-name">Black Leather Vest</div>
      <div class="price">‚Ç¶400,000.00</div>
    </div>

    <!-- Product: Black Pattern-Cut Shorts -->
    <div class="product" data-name="Black Pattern-Cut Shorts" data-price="240000" data-id="pattern-shorts-black" onclick="openProductDetail('pattern-shorts-black', 'Black Pattern-Cut Shorts', 240000, 'https://www.zttw.store/cdn/shop/files/zttw_53_8e95ed70-7bd8-46eb-b431-47c1067f51a3.jpg?v=1741957993&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_53_8e95ed70-7bd8-46eb-b431-47c1067f51a3.jpg?v=1741957993&width=3000" alt="Black Pattern-Cut Shorts" />
      <div class="product-name">Black Pattern-Cut Shorts</div>
      <div class="price">‚Ç¶240,000.00</div>
    </div>

    <!-- Product: Black Pattern-Cut Top -->
    <div class="product" data-name="Black Pattern-Cut Top" data-price="320000" data-id="pattern-top-black" onclick="openProductDetail('pattern-top-black', 'Black Pattern-Cut Top', 320000, 'https://www.zttw.store/cdn/shop/files/zttw_51_10e04cd8-4da8-459c-a614-58272cddb652.jpg?v=1741958010&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_51_10e04cd8-4da8-459c-a614-58272cddb652.jpg?v=1741958010&width=3000" alt="Black Pattern-Cut Top" />
      <div class="product-name">Black Pattern-Cut Top</div>
      <div class="price">‚Ç¶320,000.00</div>
    </div>

    <!-- Product: Black Thunderbolt Set -->
    <div class="product" data-name="Black Thunderbolt Set" data-price="1600000" data-id="thunderbolt-set-black" onclick="openProductDetail('thunderbolt-set-black', 'Black Thunderbolt Set', 1600000, 'https://www.zttw.store/cdn/shop/files/zttw_37_75920b4d-fec0-46a9-b818-c91e3c4dc6b0.jpg?v=1741958011&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_37_75920b4d-fec0-46a9-b818-c91e3c4dc6b0.jpg?v=1741958011&width=3000" alt="Black Thunderbolt Set" />
      <div class="product-name">Black Thunderbolt Set</div>
      <div class="price">‚Ç¶1,600,000.00</div>
    </div>

    <!-- Product: Brown Camo Hat -->
    <div class="product" data-name="Brown Camo Hat" data-price="160000" data-id="hat-camo-brown" onclick="openProductDetail('hat-camo-brown', 'Brown Camo Hat', 160000, 'https://www.zttw.store/cdn/shop/files/zttw_43_275b8d09-a62a-4b88-9d4c-7ed751582ec2.jpg?v=1741958006&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_43_275b8d09-a62a-4b88-9d4c-7ed751582ec2.jpg?v=1741958006&width=3000" alt="Brown Camo Hat" />
      <div class="product-name">Brown Camo Hat</div>
      <div class="price">‚Ç¶160,000.00</div>
    </div>

    <!-- Product: Brown Pattern-Cut Shorts -->
    <div class="product" data-name="Brown Pattern-Cut Shorts" data-price="240000" data-id="pattern-shorts-brown" onclick="openProductDetail('pattern-shorts-brown', 'Brown Pattern-Cut Shorts', 240000, 'https://www.zttw.store/cdn/shop/files/zttw_49_fd0c8527-624e-40b1-a5d5-429a6f667a58.jpg?v=1741958007&width=3000')">
      <img src="https://www.zttw.store/cdn/shop/files/zttw_49_fd0c8527-624e-40b1-a5d5-429a6f667a58.jpg?v=1741958007&width=3000" alt="Brown Pattern-Cut Shorts" />
      <div class="product-name">Brown Pattern-Cut Shorts</div>
      <div class="price">‚Ç¶240,000.00</div>
    </div>
  </div>

  <!-- Modal for product details -->
  <div id="productModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="product-detail">
        <div class="product-image">
          <img id="modalImage" src="" alt="Product Image" style="width: 100%;">
        </div>
        <div class="product-info">
          <h1 id="modalName"></h1>
          <div class="product-price" id="modalPrice"></div>
          
          <div class="size-options">
            <div class="size-option selected" data-size="S">S</div>
            <div class="size-option" data-size="M">M</div>
            <div class="size-option" data-size="L">L</div>
            <div class="size-option" data-size="XL">XL</div>
            <div class="size-option" data-size="2XL">2XL</div>
            <div class="size-option" data-size="3XL">3XL</div>
          </div>
          
          <div class="quantity-control">
            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
            <input type="number" class="quantity-input" id="quantity" value="1" min="1">
            <button class="quantity-btn" onclick="increaseQuantity()">+</button>
          </div>
          
          <div class="button-group">
            <button class="button add-to-cart-btn" onclick="addToCartFromModal()">
              Add to Cart
            </button>
            <button class="button buy-now-btn" onclick="buyNowFromModal()">
              Buy it now ‚Üí
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <h3>FOLLOW US</h3>
    <div class="social-icons">
      <a href="https://www.instagram.com/timeless_since_1982" target="_blank" title="Instagram">
        <img src="TIMELESS/instagramlogo.webp" alt="Instagram">
      </a>
      <a href="https://wa.me/2348166514620" target="_blank" title="WhatsApp">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" style="width: 24px; height: 24px;">
      </a>
      <a href="https://www.tiktok.com/@t_m_l11" target="_blank" title="TikTok">
        <img src="TIMELESS/tiktoklogo.webp" alt="TikTok">
      </a>
    </div>
  </footer>
  
  <script>
  // =============== CART & SEARCH SCRIPT ===============
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  function addToCart(id, name, price, image) {
    const existing = cart.find(item => item.id === id);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ id, name, price, image, quantity: 1 });
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    alert(`${name} added to cart!`);
  }

  function updateCartCount() {
    const el = document.getElementById('cart-count');
    if (el) el.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
  }

  document.addEventListener('DOMContentLoaded', updateCartCount);

  // =============== GLOBAL SEARCH ===============
  function toggleSearch() {
    const input = document.getElementById('searchInput');
    const dropdown = document.getElementById('searchDropdown');
    const isHidden = dropdown.style.display === 'none' || !dropdown.style.display;

    if (isHidden) {
      input.style.width = '200px';
      dropdown.style.display = 'block';
      input.focus();
    } else {
      input.style.width = '0';
      dropdown.style.display = 'none';
    }
  }

  async function handleSearchInput(query) {
    const suggestionsEl = document.getElementById('suggestions');
    const productsEl = document.getElementById('products');

    if (!query.trim()) {
      suggestionsEl.innerHTML = '';
      productsEl.innerHTML = '';
      return;
    }

    try {
      const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
      const data = await response.json();

      // Suggestions
      suggestionsEl.innerHTML = `
        <strong>SUGGESTIONS</strong><br/>
        ${data.suggestions.slice(0, 5).map(s => 
          `<span class="suggestion-item" onclick="searchFor('${s}')">${s}</span><br/>`
        ).join('')}
      `;

      // Products
      productsEl.innerHTML = `
        <strong>${data.total} RESULTS FOR '${query.toUpperCase()}'</strong>
        <div style="display: flex; flex-wrap: wrap; gap: 15px; margin-top: 10px;">
          ${data.results.map(p => {
            if (p.available === false) return '';
            return `
              <div class="product-preview">
                <img src="${p.image}" alt="${p.name}" />
                <div style="font-size: 12px; margin: 5px 0;">${p.name}</div>
                ${p.price ? `<div>${p.currency}${Number(p.price).toLocaleString()}</div>` : ''}
                ${p.price ? `<button class="add-to-cart-btn" onclick="addToCart('${p.id}', '${p.name}', ${p.price}, '${p.image}')">Add to Cart</button>` : ''}
              </div>`;
          }).join('')}
        </div>
      `;
    } catch (err) {
      productsEl.innerHTML = '<em>Search failed. Try again.</em>';
    }
  }

  function searchFor(term) {
    document.getElementById('searchInput').value = term;
    handleSearchInput(term);
  }

  // Close dropdown when clicking elsewhere
  document.addEventListener('click', (e) => {
    const input = document.getElementById('searchInput');
    const dropdown = document.getElementById('searchDropdown');
    if (!input.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.style.display = 'none';
      input.style.width = '0';
    }
  });

  // Navigation functions (keep yours below)
  function toggleMenu() {
    document.getElementById('mobileMenu')?.classList.toggle('active');
  }

    
  // ===== CART MANAGEMENT =====
  // Load cart from localStorage or initialize empty
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  // Update the cart badge count (e.g., üõçÔ∏è 2)
  function updateCartCount() {
    const cartCountEl = document.getElementById('cart-count');
    if (!cartCountEl) return;

    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCountEl.textContent = totalItems;
  }

  // Run on page load
  document.addEventListener('DOMContentLoaded', () => {
    updateCartCount(); // Set initial count when page loads
  });

  // ===== SEARCH FUNCTIONALITY =====
  function searchProducts() {
    const query = document.getElementById('searchInput').value.trim().toLowerCase();
    const products = document.querySelectorAll('.product');

    products.forEach(product => {
      const name = product.getAttribute('data-name').toLowerCase();
      product.style.display = name.includes(query) ? 'block' : 'none';
    });
  }

  // Reset all products (show all)
  function resetAllProducts() {
    document.querySelectorAll('.product').forEach(p => {
      p.style.display = 'block';
    });
  }

  // Toggle search bar visibility
  function toggleSearch() {
    const container = document.getElementById('searchContainer');
    const input = document.getElementById('searchInput');
    
    if (!container || container.style.display === 'none' || container.style.display === '') {
      if (container) container.style.display = 'block';
      if (input) {
        input.focus();
        input.value = '';
        searchProducts();
      }
    } else {
      if (container) container.style.display = 'none';
      if (input) input.value = '';
      resetAllProducts();
    }
  }

  // Open product detail modal
  function openProductDetail(id, name, price, image) {
    // Set modal content
    document.getElementById('modalName').textContent = name;
    document.getElementById('modalPrice').textContent = `‚Ç¶${price.toLocaleString()}`;
    document.getElementById('modalImage').src = image;
    
    // Store product info for later use
    window.currentProduct = {
      id,
      name,
      price,
      image
    };
    
    // Clear any previously selected size
    document.querySelectorAll('.size-option').forEach(btn => {
      btn.classList.remove('selected');
    });
    
    // Select default size (S)
    document.querySelector('.size-option[data-size="S"]').classList.add('selected');
    
    // Set quantity to 1
    document.getElementById('quantity').value = 1;
    
    // Show modal
    document.getElementById('productModal').style.display = 'block';
  }

  // Close modal
  function closeProductModal() {
    document.getElementById('productModal').style.display = 'none';
  }

  // Handle size selection
  document.querySelectorAll('.size-option').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.size-option').forEach(b => {
        b.classList.remove('selected');
      });
      this.classList.add('selected');
    });
  });

  // Quantity controls
  function increaseQuantity() {
    const input = document.getElementById('quantity');
    input.value = parseInt(input.value) + 1;
  }

  function decreaseQuantity() {
    const input = document.getElementById('quantity');
    if (parseInt(input.value) > 1) {
      input.value = parseInt(input.value) - 1;
    }
  }

  // Add to cart from modal
  function addToCartFromModal() {
    const name = document.getElementById('modalName').textContent;
    const price = parseFloat(document.getElementById('modalPrice').textContent.replace('‚Ç¶', '').replace(',', ''));
    const image = document.getElementById('modalImage').src;
    const size = document.querySelector('.size-option.selected').getAttribute('data-size');
    const quantity = parseInt(document.getElementById('quantity').value);
    
    // Add item to cart with size and quantity
    const existing = cart.find(item => item.id === window.currentProduct.id);
    
    if (existing) {
      existing.quantity += quantity;
    } else {
      cart.push({
        id: window.currentProduct.id,
        name: `${name} (${size})`,
        price,
        image,
        quantity
      });
    }

    // Save back to localStorage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Update the cart counter in the header
    updateCartCount();

    // Close modal
    closeProductModal();
    
    // Show confirmation
    alert(`${name} (${size}) added to cart!`);
  }

  // Buy now from modal
  function buyNowFromModal() {
    const name = document.getElementById('modalName').textContent;
    const price = parseFloat(document.getElementById('modalPrice').textContent.replace('‚Ç¶', '').replace(',', ''));
    const image = document.getElementById('modalImage').src;
    const size = document.querySelector('.size-option.selected').getAttribute('data-size');
    const quantity = parseInt(document.getElementById('quantity').value);
    
    // Add item to cart with size and quantity
    const existing = cart.find(item => item.id === window.currentProduct.id);
    
    if (existing) {
      existing.quantity += quantity;
    } else {
      cart.push({
        id: window.currentProduct.id,
        name: `${name} (${size})`,
        price,
        image,
        quantity
      });
    }

    // Save back to localStorage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Update the cart counter in the header
    updateCartCount();

    // Close modal
    closeProductModal();
    
    // Redirect to checkout
    window.location.href = 'checkout.html';
  }

  // Close modal when clicking outside of it
  window.onclick = function(event) {
    const modal = document.getElementById('productModal');
    if (event.target === modal) {
      modal.style.display = 'none';
    }
  }

  // Close modal when clicking the X button
  document.querySelector('.close').onclick = function() {
    closeProductModal();
  }

  // Close mobile menu when clicking outside
  document.addEventListener('click', function(e) {
    const mobileMenu = document.getElementById('mobileMenu');
    const menuToggle = document.querySelector('.menu-toggle');
    
    if (mobileMenu && !mobileMenu.contains(e.target) && e.target !== menuToggle && !menuToggle?.contains(e.target)) {
      mobileMenu.classList.remove('active');
    }
  });
  </script>
</body>
</html>